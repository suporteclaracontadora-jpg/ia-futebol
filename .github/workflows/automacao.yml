name: Automa√ß√£o da IA de Futebol

# AGENDAMENTO: Roda a previs√£o todos os dias √†s 04:00 UTC (01:00 AM BRT)
on:
  schedule:
    - cron: '0 4 * * *'
  # Permite rodar manualmente clicando no bot√£o "Run workflow" no GitHub
  workflow_dispatch:

jobs:
  # JOB 1: Previs√£o Di√°ria (Coleta jogos agendados e faz a previs√£o)
  previsao_diaria:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout do C√≥digo
      uses: actions/checkout@v4

    # Instala ferramentas de compila√ß√£o (gcc/build-essential) de forma segura
    - name: Instalar Ferramentas de Compila√ß√£o
      uses: maxim-top/setup-build-tools@v1
      
    # Configurar Python (Vers√£o 3.11, com sintaxe revisada)
    - name: Configurar Python 3.11
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'

    # Instala as bibliotecas diretamente (requests, pandas, joblib)
    - name: Instalar Depend√™ncias (Direto)
      run: |
        pip install --upgrade pip
        pip install requests pandas joblib
    
    - name: üß† Rodar o ia.py (Coletar jogos futuros e prever)
      run: python ia.py

    - name: üíæ Salvar Previs√µes no GitHub Gist
      # ESTE PASSO CRIA UM ARQUIVO DE TEXTO NA NUVEM (GIST) COM AS SUAS PREVIS√ïES!
      uses: softprops/action-gh-gist@v1
      with:
        files: previsoes_do_dia.csv
        token: ${{ secrets.GIST_TOKEN }}
        gist_id: '' 
        update: true
